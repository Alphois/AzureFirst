<!DOCTYPE html>
<html>
<head>
  <title>GitHub Repo JSON Generator</title>
  <link rel="stylesheet" href="index.css">
</head>
<body>
  <h1>GitHub Repo JSON Generator</h1>
  
  <label for="repo-input">Enter GitHub Repository:</label>
  <input type="text" id="repo-input" placeholder="e.g., username/repo-name">
  <button onclick="generateJSON()">Generate JSON</button>
  
  <pre id="json-output"></pre>
  <div class="metrics-container">
    <div class="metric">
      <div class="metric-label">Watchers</div>
      <div class="metric-value" id="watchers-count">-</div>
    </div>
    <div class="metric">
      <div class="metric-label">Forks</div>
      <div class="metric-value" id="forks-count">-</div>
    </div>
    <div class="metric">
      <div class="metric-label">Stars</div>
      <div class="metric-value" id="stars-count">-</div>
    </div>
  </div>
  <h2>CSV file Parsing (test) </h2>
  <table id="csv-table"></table>
  <script>
    //searching github repo
    var jsonOutput;
    function generateJSON() {
      const repoInput = document.getElementById('repo-input').value;
      
      if (repoInput.trim() === '') {
        alert('Please enter a GitHub repository in the format username/repo-name.');
        return;
      }
      
      const repoUrl = `https://api.github.com/repos/${repoInput}`;
      var repoData;
      fetch(repoUrl)
        .then(response => {
          if (!response.ok) {
            throw new Error('Failed to fetch repository details.');
          }
          return response.json();
        })
        .then(data => {
          repoData=data;
          
          jsonOutput = document.getElementById('json-output');
          jsonOutput.textContent = JSON.stringify(repoData, null, 2);
          
        })
        .catch(error => {
          alert(error.message);
        });
    }
      

// CSV parsing
    var rows;
    function parseCSV(csvData) {
      rows = csvData.split('\n');

      const table = document.getElementById('csv-table');
      table.innerHTML = '';

      for (let i = 0; i < rows.length; i++) {
        const cells = rows[i].split(',');
        const row = document.createElement('tr');

        for (let j = 0; j < 21  ; j++) {
          const cell = document.createElement(i === 0 ? 'th' : 'td');
          cell.textContent = cells[j].trim();
          row.appendChild(cell);
        }

        table.appendChild(row);
      }
    }
    // Fetch the CSV file
    fetch('Github_data.csv')
      .then(response => {
        if (!response.ok) {
          throw new Error('Failed to fetch the CSV file.');
        }
        return response.text();
      })
      .then(csvData => {
        parseCSV(csvData);
      })
      .catch(error => {
        console.error(error);
      });
//     fetch(repoUrl)
//       .then(response=> response.json())
//       .then(data =>{
//         const watchersCount = data.watchers;
// const forksCount = data.forks;
// const starsCount = data.stargazers_count;

//         document.getElementById('watchers-count').textContent = watchersCount;
//         document.getElementById('forks-count').textContent = forksCount;
//         document.getElementById('stars-count').textContent = starsCount;
      
//       function compareCounts() {
//           fetch('Github_data.csv')
//             .then(response => response.text())
//             .then(csvData => {
//               const csvLines = csvData.split('\n');
//               let totalRepositories = 0;

//               for (let i = 1; i < csvLines.length; i++) {
//                 const csvFields = csvLines[i].split(',');

//                 const csvStargazersCount = parseInt(csvFields[3], 10);
//                 const csvForksCount = parseInt(csvFields[4], 10);
//                 const csvWatchersCount = parseInt(csvFields[5], 10);

//                           if (!isNaN(csvStargazersCount) && !isNaN(csvForksCount) && !isNaN(csvWatchersCount)) {
//                     if (csvStargazersCount < starsCount && csvForksCount < forksCount && csvWatchersCount < watchersCount) {
//                       totalRepositories++;
//                     }
//                   }
//                 }

//               document.getElementById('stars-count').textContent = totalRepositories;
//               document.getElementById('forks-count').textContent = totalRepositories;
//               document.getElementById('watchers-count').textContent = totalRepositories;
//             })
//             .catch(error => {
//               console.error('Error:', error);
//             });
//         }
//         compareCounts();
//       })
//       .catch(error=>{
//         console.error('Error: ' , error);
//       });
  </script>
 
</body>
</html>
